{"version":3,"file":"nivo-tree.mjs","sources":["../src/hooks.ts","../src/defaults.ts","../src/Node.tsx","../src/Link.tsx","../src/Label.tsx","../src/canvas.ts","../src/Links.tsx","../src/Nodes.tsx","../src/labelsHooks.ts","../src/Labels.tsx","../src/Mesh.tsx","../src/Tree.tsx","../src/ResponsiveTree.tsx","../src/TreeCanvas.tsx","../src/ResponsiveTreeCanvas.tsx"],"sourcesContent":["import { createElement, MouseEvent, useCallback, useMemo, useState } from 'react'\nimport { hierarchy as d3Hierarchy, cluster as d3Cluster, tree as d3Tree } from 'd3-hierarchy'\nimport { scaleLinear, ScaleLinear } from 'd3-scale'\nimport {\n    link as d3Link,\n    CurveFactory,\n    curveLinear,\n    curveBumpX,\n    curveBumpY,\n    curveStep,\n    curveStepBefore,\n    curveStepAfter,\n} from 'd3-shape'\nimport { Margin, usePropertyAccessor } from '@nivo/core'\nimport { useTheme } from '@nivo/theming'\nimport { TooltipAnchor, TooltipPosition, useTooltip } from '@nivo/tooltip'\nimport { useOrdinalColorScale, useInheritedColor } from '@nivo/colors'\nimport {\n    DefaultDatum,\n    HierarchyTreeNode,\n    HierarchyTreeLink,\n    TreeDataProps,\n    CommonProps,\n    Layout,\n    ComputedNode,\n    ComputedLink,\n    NodeMouseEventHandler,\n    NodeTooltip,\n    IntermediateComputedLink,\n    LinkThicknessFunction,\n    LinkMouseEventHandler,\n    LinkTooltip,\n    IntermediateComputedNode,\n    CurrentNodeSetter,\n    NodeSizeModifierFunction,\n    LinkThicknessModifierFunction,\n    TreeMode,\n    LinkCurve,\n} from './types'\nimport { commonDefaultProps } from './defaults'\n\nexport const useRoot = <Datum>({\n    data,\n    mode,\n    getIdentity,\n}: {\n    data: TreeDataProps<Datum>['data']\n    mode: TreeMode\n    getIdentity: (node: Datum) => string\n}) =>\n    useMemo(() => {\n        const root = d3Hierarchy<Datum>(data) as HierarchyTreeNode<Datum>\n        const cluster = mode === 'tree' ? d3Tree<Datum>() : d3Cluster<Datum>()\n\n        root.eachBefore(node => {\n            const ancestors = node\n                .ancestors()\n                .filter(ancestor => ancestor !== node)\n                .reverse()\n            const ancestorIds = ancestors.map(ancestor => getIdentity(ancestor.data))\n\n            node.ancestorIds = ancestorIds\n            node.uid = [...ancestorIds, getIdentity(node.data)].join('.')\n            node.ancestorUids = ancestors.map(ancestor => ancestor.uid!)\n        })\n\n        root.each(node => {\n            node.descendantUids = node\n                .descendants()\n                .filter(descendant => descendant !== node)\n                .map(descendant => descendant.uid!)\n        })\n\n        cluster(root)\n\n        return root\n    }, [data, mode, getIdentity])\n\n/**\n * By default, the x/y positions are computed for a 0~1 range,\n * so that we can easily change the layout without having to\n * recompute the nodes.\n */\nconst useCartesianScales = ({\n    width,\n    height,\n    layout,\n}: {\n    width: number\n    height: number\n    layout: Layout\n}) =>\n    useMemo(() => {\n        const xScale = scaleLinear().domain([0, 1])\n        const yScale = scaleLinear().domain([0, 1])\n\n        if (layout === 'top-to-bottom') {\n            xScale.range([0, width])\n            yScale.range([0, height])\n        } else if (layout === 'right-to-left') {\n            xScale.range([width, 0])\n            yScale.range([0, height])\n        } else if (layout === 'bottom-to-top') {\n            xScale.range([width, 0])\n            yScale.range([height, 0])\n        } else if (layout === 'left-to-right') {\n            xScale.range([0, width])\n            yScale.range([height, 0])\n        }\n\n        return {\n            xScale,\n            yScale,\n        }\n    }, [width, height, layout])\n\nconst useNodeSize = <Datum>(size: Exclude<CommonProps<Datum>['nodeSize'], undefined>) =>\n    useMemo(() => {\n        if (typeof size === 'function') return size\n        return () => size\n    }, [size])\n\nconst useNodeSizeModifier = <Datum>(size?: NodeSizeModifierFunction<Datum> | number) =>\n    useMemo(() => {\n        if (size === undefined) return (node: ComputedNode<Datum>) => node.size\n        if (typeof size === 'function') return size\n        return () => size\n    }, [size])\n\nconst useNodes = <Datum>({\n    root,\n    xScale,\n    yScale,\n    layout,\n    getIdentity,\n    nodeSize,\n    activeNodeSize,\n    inactiveNodeSize,\n    nodeColor,\n    fixNodeColorAtDepth,\n}: {\n    root: HierarchyTreeNode<Datum>\n    xScale: ScaleLinear<number, number>\n    yScale: ScaleLinear<number, number>\n    layout: Layout\n    getIdentity: (node: Datum) => string\n    nodeSize: Exclude<CommonProps<Datum>['nodeSize'], undefined>\n    activeNodeSize?: CommonProps<Datum>['activeNodeSize']\n    inactiveNodeSize?: CommonProps<Datum>['inactiveNodeSize']\n    nodeColor: Exclude<CommonProps<Datum>['nodeColor'], undefined>\n    fixNodeColorAtDepth: number\n}) => {\n    const intermediateNodes = useMemo<IntermediateComputedNode<Datum>[]>(() => {\n        return root.descendants().map(node => {\n            let x: number\n            let y: number\n            if (layout === 'top-to-bottom' || layout === 'bottom-to-top') {\n                x = xScale(node.x!)\n                y = yScale(node.y!)\n            } else {\n                x = xScale(node.y!)\n                y = yScale(node.x!)\n            }\n\n            const id = getIdentity(node.data)\n\n            return {\n                path: [...node.ancestorIds!, id],\n                uid: node.uid!,\n                isRoot: node.depth === 0,\n                isLeaf: node.height === 0,\n                ancestorIds: node.ancestorIds!,\n                ancestorUids: node.ancestorUids!,\n                descendantUids: node.descendantUids!,\n                id,\n                data: node.data,\n                depth: node.depth,\n                height: node.height,\n                x,\n                y,\n            }\n        })\n    }, [root, getIdentity, layout, xScale, yScale])\n\n    const getNodeSize = useNodeSize<Datum>(nodeSize)\n    const getActiveNodeSize = useNodeSizeModifier<Datum>(activeNodeSize)\n    const getInactiveNodeSize = useNodeSizeModifier<Datum>(inactiveNodeSize)\n\n    const getNodeColorBase = useOrdinalColorScale(nodeColor, 'uid')\n    // Wrap the default color function to support `getNodeColorAtDepth`.\n    const getNodeColor = useMemo(() => {\n        if (fixNodeColorAtDepth === Infinity) return getNodeColorBase\n\n        return (\n            node: IntermediateComputedNode<Datum>,\n            nodeByUid: Record<string, ComputedNode<Datum>>\n        ) => {\n            if (\n                node.depth <= 0 ||\n                node.depth <= fixNodeColorAtDepth ||\n                node.ancestorUids.length === 0\n            )\n                return getNodeColorBase(node)\n\n            const parentUid = node.ancestorUids[node.ancestorUids.length - 1]\n            const parent = nodeByUid[parentUid]\n            if (parent === undefined) return getNodeColorBase(node)\n\n            return parent.color\n        }\n    }, [getNodeColorBase, fixNodeColorAtDepth])\n\n    const [activeNodeUids, setActiveNodeUids] = useState<string[]>([])\n\n    const computed = useMemo(() => {\n        const nodeByUid: Record<string, ComputedNode<Datum>> = {}\n\n        const nodes: ComputedNode<Datum>[] = intermediateNodes.map(intermediateNode => {\n            const computedNode: ComputedNode<Datum> = {\n                ...intermediateNode,\n                size: getNodeSize(intermediateNode),\n                color: getNodeColor(intermediateNode, nodeByUid),\n                isActive: null,\n            }\n\n            if (activeNodeUids.length > 0) {\n                computedNode.isActive = activeNodeUids.includes(computedNode.uid)\n                if (computedNode.isActive) {\n                    computedNode.size = getActiveNodeSize(computedNode)\n                } else {\n                    computedNode.size = getInactiveNodeSize(computedNode)\n                }\n            }\n\n            nodeByUid[computedNode.uid] = computedNode\n\n            return computedNode\n        })\n\n        return { nodes, nodeByUid }\n    }, [\n        intermediateNodes,\n        getNodeSize,\n        getActiveNodeSize,\n        getInactiveNodeSize,\n        getNodeColor,\n        activeNodeUids,\n    ])\n\n    return { ...computed, activeNodeUids, setActiveNodeUids }\n}\n\nconst useLinkThicknessModifier = <Datum>(\n    thickness?: LinkThicknessModifierFunction<Datum> | number\n) =>\n    useMemo(() => {\n        if (thickness === undefined) return (link: ComputedLink<Datum>) => link.thickness\n        if (typeof thickness === 'function') return thickness\n        return () => thickness\n    }, [thickness])\n\nconst useLinks = <Datum>({\n    root,\n    nodeByUid,\n    activeNodeUids,\n    linkThickness,\n    activeLinkThickness,\n    inactiveLinkThickness,\n    linkColor,\n}: {\n    root: HierarchyTreeNode<Datum>\n    nodeByUid: Record<string, ComputedNode<Datum>>\n    activeNodeUids: readonly string[]\n    linkThickness: Exclude<CommonProps<Datum>['linkThickness'], undefined>\n    activeLinkThickness?: CommonProps<Datum>['activeLinkThickness']\n    inactiveLinkThickness?: CommonProps<Datum>['inactiveLinkThickness']\n    linkColor: Exclude<CommonProps<Datum>['linkColor'], undefined>\n}) => {\n    const intermediateLinks = useMemo<IntermediateComputedLink<Datum>[]>(() => {\n        return (root.links() as HierarchyTreeLink<Datum>[]).map(link => {\n            return {\n                id: `${link.source.uid}:${link.target.uid}`,\n                // Replace with computed nodes.\n                source: nodeByUid[link.source.uid!],\n                target: nodeByUid[link.target.uid!],\n            }\n        })\n    }, [root, nodeByUid])\n\n    const getLinkThickness: LinkThicknessFunction<Datum> = useMemo(() => {\n        if (typeof linkThickness === 'function') return linkThickness\n        return () => linkThickness\n    }, [linkThickness])\n    const getActiveLinkThickness = useLinkThicknessModifier(activeLinkThickness)\n    const getInactiveLinkThickness = useLinkThicknessModifier(inactiveLinkThickness)\n\n    const theme = useTheme()\n    const getLinkColor = useInheritedColor(linkColor, theme)\n\n    const [activeLinkIds, setActiveLinkIds] = useState<string[]>([])\n\n    const links = useMemo(() => {\n        return intermediateLinks.map(intermediateLink => {\n            const computedLink: ComputedLink<Datum> = {\n                ...intermediateLink,\n                thickness: getLinkThickness(intermediateLink),\n                color: getLinkColor(intermediateLink),\n                isActive: null,\n            }\n\n            if (activeNodeUids.length > 0) {\n                computedLink.isActive = activeLinkIds.includes(computedLink.id)\n                if (computedLink.isActive) {\n                    computedLink.thickness = getActiveLinkThickness(computedLink)\n                } else {\n                    computedLink.thickness = getInactiveLinkThickness(computedLink)\n                }\n            }\n\n            return computedLink\n        })\n    }, [\n        intermediateLinks,\n        getLinkThickness,\n        getActiveLinkThickness,\n        getInactiveLinkThickness,\n        getLinkColor,\n        activeNodeUids.length,\n        activeLinkIds,\n    ])\n\n    return {\n        links,\n        setActiveLinkIds,\n    }\n}\n\nconst useLinkGenerator = ({ layout, curve }: { layout: Layout; curve: LinkCurve }) =>\n    useMemo(() => {\n        let curveFactory: CurveFactory = curveLinear\n\n        if (curve === 'bump') {\n            if (layout === 'top-to-bottom' || layout === 'bottom-to-top') {\n                curveFactory = curveBumpY\n            } else {\n                curveFactory = curveBumpX\n            }\n        } else if (curve === 'step') {\n            curveFactory = curveStep\n        } else if (curve === 'step-before') {\n            curveFactory = curveStepBefore\n        } else if (curve === 'step-after') {\n            curveFactory = curveStepAfter\n        }\n\n        return d3Link(curveFactory)\n    }, [layout, curve])\n\nconst useSetCurrentNode = <Datum>({\n    setActiveNodeUids,\n    highlightAncestorNodes,\n    highlightDescendantNodes,\n    links,\n    setActiveLinkIds,\n    highlightAncestorLinks,\n    highlightDescendantLinks,\n}: {\n    setActiveNodeUids: (uids: string[]) => void\n    highlightAncestorNodes: boolean\n    highlightDescendantNodes: boolean\n    links: readonly ComputedLink<Datum>[]\n    setActiveLinkIds: (ids: string[]) => void\n    highlightAncestorLinks: boolean\n    highlightDescendantLinks: boolean\n}) =>\n    useCallback(\n        (node: ComputedNode<Datum> | null) => {\n            if (node === null) {\n                setActiveNodeUids([])\n                setActiveLinkIds([])\n            } else {\n                let nodeUids: string[] = [node.uid]\n                if (highlightAncestorNodes) {\n                    nodeUids = [...nodeUids, ...node.ancestorUids]\n                }\n                if (highlightDescendantNodes) {\n                    nodeUids = [...nodeUids, ...node.descendantUids]\n                }\n                setActiveNodeUids(nodeUids)\n\n                const linkIds: string[] = []\n                if (highlightAncestorLinks) {\n                    links\n                        .filter(link => {\n                            return (\n                                link.target.uid === node.uid ||\n                                node.ancestorUids.includes(link.target.uid)\n                            )\n                        })\n                        .forEach(link => {\n                            linkIds.push(link.id)\n                        })\n                }\n                if (highlightDescendantLinks) {\n                    links\n                        .filter(link => {\n                            return (\n                                link.source.uid === node.uid ||\n                                node.descendantUids.includes(link.source.uid)\n                            )\n                        })\n                        .forEach(link => {\n                            linkIds.push(link.id)\n                        })\n                }\n                setActiveLinkIds(linkIds)\n            }\n        },\n        [\n            setActiveNodeUids,\n            highlightAncestorNodes,\n            highlightDescendantNodes,\n            links,\n            setActiveLinkIds,\n            highlightAncestorLinks,\n            highlightDescendantLinks,\n        ]\n    )\n\nexport const useTree = <Datum = DefaultDatum>({\n    data,\n    width,\n    height,\n    identity = commonDefaultProps.identity,\n    mode = commonDefaultProps.mode,\n    layout = commonDefaultProps.layout,\n    nodeSize = commonDefaultProps.nodeSize,\n    activeNodeSize,\n    inactiveNodeSize,\n    nodeColor = commonDefaultProps.nodeColor,\n    fixNodeColorAtDepth = commonDefaultProps.fixNodeColorAtDepth,\n    highlightAncestorNodes = commonDefaultProps.highlightAncestorNodes,\n    highlightDescendantNodes = commonDefaultProps.highlightDescendantNodes,\n    linkCurve = commonDefaultProps.linkCurve,\n    linkThickness = commonDefaultProps.linkThickness,\n    linkColor = commonDefaultProps.linkColor,\n    activeLinkThickness,\n    inactiveLinkThickness,\n    highlightAncestorLinks = commonDefaultProps.highlightAncestorLinks,\n    highlightDescendantLinks = commonDefaultProps.highlightDescendantLinks,\n}: {\n    data: TreeDataProps<Datum>['data']\n    width: number\n    height: number\n    identity?: CommonProps<Datum>['identity']\n    mode?: TreeMode\n    layout?: Layout\n    nodeSize?: CommonProps<Datum>['nodeSize']\n    activeNodeSize?: CommonProps<Datum>['activeNodeSize']\n    inactiveNodeSize?: CommonProps<Datum>['inactiveNodeSize']\n    nodeColor?: CommonProps<Datum>['nodeColor']\n    fixNodeColorAtDepth?: number\n    highlightAncestorNodes?: boolean\n    highlightDescendantNodes?: boolean\n    linkCurve?: LinkCurve\n    linkThickness?: CommonProps<Datum>['linkThickness']\n    activeLinkThickness?: CommonProps<Datum>['activeLinkThickness']\n    inactiveLinkThickness?: CommonProps<Datum>['inactiveLinkThickness']\n    linkColor?: CommonProps<Datum>['linkColor']\n    highlightAncestorLinks?: boolean\n    highlightDescendantLinks?: boolean\n}) => {\n    const getIdentity = usePropertyAccessor(identity)\n    const root = useRoot<Datum>({ data, mode, getIdentity })\n\n    const { xScale, yScale } = useCartesianScales({ width, height, layout })\n    const { nodes, nodeByUid, activeNodeUids, setActiveNodeUids } = useNodes<Datum>({\n        root,\n        xScale,\n        yScale,\n        layout,\n        getIdentity,\n        nodeSize,\n        activeNodeSize,\n        inactiveNodeSize,\n        nodeColor,\n        fixNodeColorAtDepth,\n    })\n\n    const linkGenerator = useLinkGenerator({ layout, curve: linkCurve })\n    const { links, setActiveLinkIds } = useLinks<Datum>({\n        root,\n        nodeByUid,\n        activeNodeUids,\n        linkThickness,\n        activeLinkThickness,\n        inactiveLinkThickness,\n        linkColor,\n    })\n\n    const setCurrentNode = useSetCurrentNode<Datum>({\n        setActiveNodeUids,\n        highlightAncestorNodes,\n        highlightDescendantNodes,\n        links,\n        setActiveLinkIds,\n        highlightAncestorLinks,\n        highlightDescendantLinks,\n    })\n\n    return {\n        nodes,\n        nodeByUid,\n        links,\n        linkGenerator,\n        setCurrentNode,\n    }\n}\n\n/**\n * This hook may generates mouse event handlers for a node according to the main chart props.\n * It's used for the default `Node` component and may be used for custom nodes\n * to simplify their implementation.\n */\nexport const useNodeMouseEventHandlers = <Datum>(\n    node: ComputedNode<Datum>,\n    {\n        isInteractive,\n        onMouseEnter,\n        onMouseMove,\n        onMouseLeave,\n        onMouseDown,\n        onMouseUp,\n        onClick,\n        onDoubleClick,\n        setCurrentNode,\n        tooltip,\n        tooltipPosition,\n        tooltipAnchor,\n        margin,\n    }: {\n        isInteractive: boolean\n        onMouseEnter?: NodeMouseEventHandler<Datum>\n        onMouseMove?: NodeMouseEventHandler<Datum>\n        onMouseLeave?: NodeMouseEventHandler<Datum>\n        onMouseDown?: NodeMouseEventHandler<Datum>\n        onMouseUp?: NodeMouseEventHandler<Datum>\n        onClick?: NodeMouseEventHandler<Datum>\n        onDoubleClick?: NodeMouseEventHandler<Datum>\n        setCurrentNode: CurrentNodeSetter<Datum>\n        tooltip?: NodeTooltip<Datum>\n        tooltipPosition: TooltipPosition\n        tooltipAnchor: TooltipAnchor\n        margin: Margin\n    }\n) => {\n    const { showTooltipFromEvent, showTooltipAt, hideTooltip } = useTooltip()\n\n    const showTooltip = useMemo(() => {\n        if (!tooltip) return undefined\n\n        if (tooltipPosition === 'fixed') {\n            return () => {\n                const { x, y } = node\n                showTooltipAt(\n                    createElement(tooltip, {\n                        node,\n                    }),\n                    [x + margin.left, y + margin.top],\n                    tooltipAnchor\n                )\n            }\n        }\n\n        return (event: MouseEvent) => {\n            showTooltipFromEvent(\n                createElement(tooltip, {\n                    node,\n                }),\n                event,\n                tooltipAnchor\n            )\n        }\n    }, [node, tooltip, showTooltipFromEvent, showTooltipAt, tooltipPosition, tooltipAnchor, margin])\n\n    const handleMouseEnter = useCallback(\n        (event: MouseEvent) => {\n            setCurrentNode(node)\n            showTooltip?.(event)\n            onMouseEnter?.(node, event)\n        },\n        [node, showTooltip, setCurrentNode, onMouseEnter]\n    )\n\n    const handleMouseMove = useCallback(\n        (event: MouseEvent) => {\n            showTooltip?.(event)\n            onMouseMove?.(node, event)\n        },\n        [node, showTooltip, onMouseMove]\n    )\n\n    const handleMouseLeave = useCallback(\n        (event: MouseEvent) => {\n            setCurrentNode(null)\n            hideTooltip()\n            onMouseLeave?.(node, event)\n        },\n        [node, hideTooltip, setCurrentNode, onMouseLeave]\n    )\n\n    const handleMouseDown = useCallback(\n        (event: MouseEvent) => {\n            onMouseDown?.(node, event)\n        },\n        [node, onMouseDown]\n    )\n\n    const handleMouseUp = useCallback(\n        (event: MouseEvent) => {\n            onMouseUp?.(node, event)\n        },\n        [node, onMouseUp]\n    )\n\n    const handleClick = useCallback(\n        (event: MouseEvent) => {\n            onClick?.(node, event)\n        },\n        [node, onClick]\n    )\n\n    const handleDoubleClick = useCallback(\n        (event: MouseEvent) => {\n            onDoubleClick?.(node, event)\n        },\n        [node, onDoubleClick]\n    )\n\n    return {\n        onMouseEnter: isInteractive ? handleMouseEnter : undefined,\n        onMouseMove: isInteractive ? handleMouseMove : undefined,\n        onMouseLeave: isInteractive ? handleMouseLeave : undefined,\n        onMouseDown: isInteractive ? handleMouseDown : undefined,\n        onMouseUp: isInteractive ? handleMouseUp : undefined,\n        onClick: isInteractive ? handleClick : undefined,\n        onDoubleClick: isInteractive ? handleDoubleClick : undefined,\n    }\n}\n\n/**\n * This hook may generates mouse event handlers for a node according to the main chart props.\n * It's used for the default `Node` component and may be used for custom nodes\n * to simplify their implementation.\n */\nexport const useLinkMouseEventHandlers = <Datum>(\n    link: ComputedLink<Datum>,\n    {\n        isInteractive,\n        onMouseEnter,\n        onMouseMove,\n        onMouseLeave,\n        onMouseDown,\n        onMouseUp,\n        onClick,\n        onDoubleClick,\n        tooltip,\n        tooltipAnchor,\n    }: {\n        isInteractive: boolean\n        onMouseEnter?: LinkMouseEventHandler<Datum>\n        onMouseMove?: LinkMouseEventHandler<Datum>\n        onMouseLeave?: LinkMouseEventHandler<Datum>\n        onMouseDown?: LinkMouseEventHandler<Datum>\n        onMouseUp?: LinkMouseEventHandler<Datum>\n        onClick?: LinkMouseEventHandler<Datum>\n        onDoubleClick?: LinkMouseEventHandler<Datum>\n        tooltip?: LinkTooltip<Datum>\n        tooltipAnchor: TooltipAnchor\n    }\n) => {\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const showTooltip = useMemo(() => {\n        if (!tooltip) return undefined\n\n        return (event: MouseEvent) => {\n            showTooltipFromEvent(\n                createElement(tooltip, {\n                    link,\n                }),\n                event,\n                tooltipAnchor\n            )\n        }\n    }, [link, tooltip, showTooltipFromEvent, tooltipAnchor])\n\n    const handleMouseEnter = useCallback(\n        (event: MouseEvent) => {\n            showTooltip?.(event)\n            onMouseEnter?.(link, event)\n        },\n        [link, showTooltip, onMouseEnter]\n    )\n\n    const handleMouseMove = useCallback(\n        (event: MouseEvent) => {\n            showTooltip?.(event)\n            onMouseMove?.(link, event)\n        },\n        [link, showTooltip, onMouseMove]\n    )\n\n    const handleMouseLeave = useCallback(\n        (event: MouseEvent) => {\n            hideTooltip()\n            onMouseLeave?.(link, event)\n        },\n        [link, hideTooltip, onMouseLeave]\n    )\n\n    const handleMouseDown = useCallback(\n        (event: MouseEvent) => {\n            onMouseDown?.(link, event)\n        },\n        [link, onMouseDown]\n    )\n\n    const handleMouseUp = useCallback(\n        (event: MouseEvent) => {\n            onMouseUp?.(link, event)\n        },\n        [link, onMouseUp]\n    )\n\n    const handleClick = useCallback(\n        (event: MouseEvent) => {\n            onClick?.(link, event)\n        },\n        [link, onClick]\n    )\n\n    const handleDoubleClick = useCallback(\n        (event: MouseEvent) => {\n            onDoubleClick?.(link, event)\n        },\n        [link, onDoubleClick]\n    )\n\n    return {\n        onMouseEnter: isInteractive ? handleMouseEnter : undefined,\n        onMouseMove: isInteractive ? handleMouseMove : undefined,\n        onMouseLeave: isInteractive ? handleMouseLeave : undefined,\n        onMouseDown: isInteractive ? handleMouseDown : undefined,\n        onMouseUp: isInteractive ? handleMouseUp : undefined,\n        onClick: isInteractive ? handleClick : undefined,\n        onDoubleClick: isInteractive ? handleDoubleClick : undefined,\n    }\n}\n","import { CommonProps, TreeCanvasProps, TreeSvgProps } from './types'\nimport { Node } from './Node'\nimport { Link } from './Link'\nimport { Label } from './Label'\nimport { renderNode, renderLink, renderLabel } from './canvas'\n\nexport const commonDefaultProps: Pick<\n    CommonProps<any>,\n    | 'identity'\n    | 'mode'\n    | 'layout'\n    | 'nodeSize'\n    | 'nodeColor'\n    | 'fixNodeColorAtDepth'\n    | 'linkCurve'\n    | 'linkThickness'\n    | 'linkColor'\n    | 'enableLabel'\n    | 'label'\n    | 'labelsPosition'\n    | 'orientLabel'\n    | 'labelOffset'\n    | 'isInteractive'\n    | 'useMesh'\n    | 'meshDetectionRadius'\n    | 'debugMesh'\n    | 'highlightAncestorNodes'\n    | 'highlightDescendantNodes'\n    | 'highlightAncestorLinks'\n    | 'highlightDescendantLinks'\n    | 'nodeTooltipPosition'\n    | 'nodeTooltipAnchor'\n    | 'role'\n    | 'animate'\n    | 'motionConfig'\n> = {\n    identity: 'id',\n    mode: 'dendogram',\n    layout: 'top-to-bottom',\n    nodeSize: 12,\n    nodeColor: { scheme: 'nivo' },\n    fixNodeColorAtDepth: Infinity,\n    linkCurve: 'bump',\n    linkThickness: 1,\n    linkColor: { from: 'source.color', modifiers: [['opacity', 0.4]] },\n    enableLabel: true,\n    label: 'id',\n    labelsPosition: 'outward',\n    orientLabel: true,\n    labelOffset: 6,\n    isInteractive: true,\n    useMesh: true,\n    meshDetectionRadius: Infinity,\n    debugMesh: false,\n    highlightAncestorNodes: true,\n    highlightDescendantNodes: false,\n    highlightAncestorLinks: true,\n    highlightDescendantLinks: false,\n    nodeTooltipPosition: 'fixed',\n    nodeTooltipAnchor: 'top',\n    role: 'img',\n    animate: true,\n    motionConfig: 'gentle',\n}\n\nexport const svgDefaultProps: typeof commonDefaultProps &\n    Required<\n        Pick<\n            TreeSvgProps<any>,\n            'layers' | 'nodeComponent' | 'linkComponent' | 'labelComponent' | 'linkTooltipAnchor'\n        >\n    > = {\n    ...commonDefaultProps,\n    layers: ['links', 'nodes', 'labels', 'mesh'],\n    nodeComponent: Node,\n    linkComponent: Link,\n    labelComponent: Label,\n    linkTooltipAnchor: 'top',\n}\n\nexport const canvasDefaultProps: typeof commonDefaultProps &\n    Required<\n        Pick<\n            TreeCanvasProps<any>,\n            'layers' | 'renderNode' | 'renderLink' | 'renderLabel' | 'pixelRatio'\n        >\n    > = {\n    ...commonDefaultProps,\n    layers: ['links', 'nodes', 'labels', 'mesh'],\n    renderNode,\n    renderLink,\n    renderLabel,\n    pixelRatio: typeof window !== 'undefined' ? window.devicePixelRatio || 1 : 1,\n}\n","import { animated } from '@react-spring/web'\nimport { NodeComponentProps } from './types'\nimport { useNodeMouseEventHandlers } from './hooks'\n\nexport const Node = <Datum,>({\n    node,\n    isInteractive,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onMouseDown,\n    onMouseUp,\n    onClick,\n    onDoubleClick,\n    setCurrentNode,\n    tooltip,\n    tooltipPosition,\n    tooltipAnchor,\n    margin,\n    animatedProps,\n}: NodeComponentProps<Datum>) => {\n    const eventHandlers = useNodeMouseEventHandlers<Datum>(node, {\n        isInteractive,\n        onMouseEnter,\n        onMouseMove,\n        onMouseLeave,\n        onMouseDown,\n        onMouseUp,\n        onClick,\n        onDoubleClick,\n        setCurrentNode,\n        tooltip,\n        tooltipPosition,\n        tooltipAnchor,\n        margin,\n    })\n\n    return (\n        <animated.circle\n            data-testid={`node.${node.uid}`}\n            r={animatedProps.size.to(size => size / 2)}\n            fill={animatedProps.color}\n            cx={animatedProps.x}\n            cy={animatedProps.y}\n            {...eventHandlers}\n        />\n    )\n}\n","import { animated, to } from '@react-spring/web'\nimport { LinkComponentProps } from './types'\nimport { useLinkMouseEventHandlers } from './hooks'\n\nexport const Link = <Datum,>({\n    link,\n    linkGenerator,\n    isInteractive,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onMouseDown,\n    onMouseUp,\n    onClick,\n    onDoubleClick,\n    tooltip,\n    tooltipAnchor,\n    animatedProps,\n}: LinkComponentProps<Datum>) => {\n    const eventHandlers = useLinkMouseEventHandlers<Datum>(link, {\n        isInteractive,\n        onMouseEnter,\n        onMouseMove,\n        onMouseLeave,\n        onMouseDown,\n        onMouseUp,\n        onClick,\n        onDoubleClick,\n        tooltip,\n        tooltipAnchor,\n    })\n\n    return (\n        <animated.path\n            data-testid={`link.${link.id}`}\n            d={to(\n                [\n                    animatedProps.sourceX,\n                    animatedProps.sourceY,\n                    animatedProps.targetX,\n                    animatedProps.targetY,\n                ],\n                (sourceX, sourceY, targetX, targetY) => {\n                    return linkGenerator({\n                        source: [sourceX, sourceY],\n                        target: [targetX, targetY],\n                    })\n                }\n            )}\n            fill=\"none\"\n            strokeWidth={animatedProps.thickness}\n            stroke={animatedProps.color}\n            {...eventHandlers}\n        />\n    )\n}\n","import { animated, to } from '@react-spring/web'\nimport { useTheme } from '@nivo/theming'\nimport { Text } from '@nivo/text'\nimport { LabelComponentProps } from './types'\n\nexport const Label = <Datum,>({ label, animatedProps }: LabelComponentProps<Datum>) => {\n    const theme = useTheme()\n\n    return (\n        <animated.g\n            data-testid={`label.${label.id}`}\n            transform={to([animatedProps.x, animatedProps.y], (x, y) => `translate(${x},${y})`)}\n        >\n            <animated.g transform={animatedProps.rotation.to(rotation => `rotate(${rotation})`)}>\n                <Text\n                    data-testid={`label.${label.id}.label`}\n                    style={theme.labels.text}\n                    textAnchor={label.textAnchor}\n                    dominantBaseline={label.baseline}\n                >\n                    {label.label}\n                </Text>\n            </animated.g>\n        </animated.g>\n    )\n}\n","import { degreesToRadians } from '@nivo/core'\nimport { drawCanvasText } from '@nivo/text'\nimport { LinkCanvasRendererProps, NodeCanvasRendererProps, LabelCanvasRendererProps } from './types'\n\nexport const renderNode = <Datum>(\n    ctx: CanvasRenderingContext2D,\n    { node }: NodeCanvasRendererProps<Datum>\n) => {\n    ctx.beginPath()\n    ctx.arc(node.x, node.y, node.size / 2, 0, 2 * Math.PI)\n    ctx.fillStyle = node.color\n    ctx.fill()\n}\n\nexport const renderLink = <Datum>(\n    ctx: CanvasRenderingContext2D,\n    { link, linkGenerator }: LinkCanvasRendererProps<Datum>\n) => {\n    ctx.strokeStyle = link.color\n    ctx.lineWidth = link.thickness\n    ctx.beginPath()\n    linkGenerator({\n        source: [link.source.x, link.source.y],\n        target: [link.target.x, link.target.y],\n    })\n    ctx.stroke()\n}\n\nexport const renderLabel = <Datum>(\n    ctx: CanvasRenderingContext2D,\n    { label, theme }: LabelCanvasRendererProps<Datum>\n) => {\n    ctx.save()\n\n    ctx.translate(label.x, label.y)\n    ctx.rotate(degreesToRadians(label.rotation))\n\n    ctx.textBaseline = 'middle'\n    ctx.textAlign = label.textAnchor === 'middle' ? 'center' : label.textAnchor\n    ctx.fillStyle = '#000'\n\n    drawCanvasText(ctx, theme.labels.text, label.label)\n\n    ctx.restore()\n}\n","import { createElement } from 'react'\nimport { useTransition } from '@react-spring/web'\nimport { useMotionConfig } from '@nivo/core'\nimport { TooltipAnchor } from '@nivo/tooltip'\nimport {\n    ComputedLink,\n    LinkComponent,\n    LinkMouseEventHandler,\n    LinkTooltip,\n    LinkAnimatedProps,\n    LinkGenerator,\n} from './types'\n\ninterface LinksProps<Datum> {\n    links: ComputedLink<Datum>[]\n    linkComponent: LinkComponent<Datum>\n    linkGenerator: LinkGenerator\n    isInteractive: boolean\n    onMouseEnter?: LinkMouseEventHandler<Datum>\n    onMouseMove?: LinkMouseEventHandler<Datum>\n    onMouseLeave?: LinkMouseEventHandler<Datum>\n    onMouseDown?: LinkMouseEventHandler<Datum>\n    onMouseUp?: LinkMouseEventHandler<Datum>\n    onClick?: LinkMouseEventHandler<Datum>\n    onDoubleClick?: LinkMouseEventHandler<Datum>\n    tooltip?: LinkTooltip<Datum>\n    tooltipAnchor: TooltipAnchor\n}\n\nconst regularTransition = <Datum,>(link: ComputedLink<Datum>): LinkAnimatedProps => ({\n    sourceX: link.source.x,\n    sourceY: link.source.y,\n    targetX: link.target.x,\n    targetY: link.target.y,\n    thickness: link.thickness,\n    color: link.color,\n})\nconst leaveTransition = <Datum,>(link: ComputedLink<Datum>): LinkAnimatedProps => ({\n    sourceX: link.source.x,\n    sourceY: link.source.y,\n    targetX: link.target.x,\n    targetY: link.target.y,\n    thickness: link.thickness,\n    color: link.color,\n})\n\nexport const Links = <Datum,>({\n    links,\n    linkComponent,\n    linkGenerator,\n    isInteractive,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onMouseDown,\n    onMouseUp,\n    onClick,\n    onDoubleClick,\n    tooltip,\n    tooltipAnchor,\n}: LinksProps<Datum>) => {\n    const { animate, config: springConfig } = useMotionConfig()\n\n    const transition = useTransition<ComputedLink<Datum>, LinkAnimatedProps>(links, {\n        keys: link => link.id,\n        from: regularTransition,\n        enter: regularTransition,\n        update: regularTransition,\n        leave: leaveTransition,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    return (\n        <>\n            {transition((animatedProps, link) =>\n                createElement(linkComponent, {\n                    link,\n                    linkGenerator,\n                    animatedProps,\n                    isInteractive,\n                    onMouseEnter,\n                    onMouseMove,\n                    onMouseLeave,\n                    onMouseDown,\n                    onMouseUp,\n                    onClick,\n                    onDoubleClick,\n                    tooltip,\n                    tooltipAnchor,\n                })\n            )}\n        </>\n    )\n}\n","import { createElement } from 'react'\nimport { useTransition } from '@react-spring/web'\nimport { Margin, useMotionConfig } from '@nivo/core'\nimport { TooltipAnchor, TooltipPosition } from '@nivo/tooltip'\nimport {\n    ComputedNode,\n    CurrentNodeSetter,\n    NodeComponent,\n    NodeMouseEventHandler,\n    NodeTooltip,\n    NodeAnimatedProps,\n} from './types'\n\ninterface NodesProps<Datum> {\n    nodes: ComputedNode<Datum>[]\n    nodeComponent: NodeComponent<Datum>\n    isInteractive: boolean\n    onMouseEnter?: NodeMouseEventHandler<Datum>\n    onMouseMove?: NodeMouseEventHandler<Datum>\n    onMouseLeave?: NodeMouseEventHandler<Datum>\n    onMouseDown?: NodeMouseEventHandler<Datum>\n    onMouseUp?: NodeMouseEventHandler<Datum>\n    onClick?: NodeMouseEventHandler<Datum>\n    onDoubleClick?: NodeMouseEventHandler<Datum>\n    setCurrentNode: CurrentNodeSetter<Datum>\n    tooltip?: NodeTooltip<Datum>\n    tooltipPosition: TooltipPosition\n    tooltipAnchor: TooltipAnchor\n    margin: Margin\n}\n\nconst regularTransition = <Datum,>(node: ComputedNode<Datum>): NodeAnimatedProps => ({\n    x: node.x,\n    y: node.y,\n    size: node.size,\n    color: node.color,\n})\nconst leaveTransition = <Datum,>(node: ComputedNode<Datum>): NodeAnimatedProps => ({\n    x: node.x,\n    y: node.y,\n    size: 0,\n    color: node.color,\n})\n\nexport const Nodes = <Datum,>({\n    nodes,\n    nodeComponent,\n    isInteractive,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onMouseDown,\n    onMouseUp,\n    onClick,\n    onDoubleClick,\n    setCurrentNode,\n    tooltip,\n    tooltipPosition,\n    tooltipAnchor,\n    margin,\n}: NodesProps<Datum>) => {\n    const { animate, config: springConfig } = useMotionConfig()\n\n    const transition = useTransition<ComputedNode<Datum>, NodeAnimatedProps>(nodes, {\n        keys: node => node.uid,\n        from: regularTransition,\n        enter: regularTransition,\n        update: regularTransition,\n        leave: leaveTransition,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    return (\n        <>\n            {transition((animatedProps, node) =>\n                createElement(nodeComponent, {\n                    node,\n                    isInteractive,\n                    onMouseEnter,\n                    onMouseMove,\n                    onMouseLeave,\n                    onMouseDown,\n                    onMouseUp,\n                    onClick,\n                    onDoubleClick,\n                    setCurrentNode,\n                    tooltip,\n                    tooltipPosition,\n                    tooltipAnchor,\n                    margin,\n                    animatedProps,\n                })\n            )}\n        </>\n    )\n}\n","import { useMemo } from 'react'\nimport { usePropertyAccessor } from '@nivo/core'\nimport {\n    CommonProps,\n    Layout,\n    ComputedNode,\n    ComputedLabel,\n    LabelsPosition,\n    LabelTextAnchor,\n    LabelBaseline,\n} from './types'\n\ninterface LabelPositionResult {\n    x: number\n    y: number\n    rotation: number\n    textAnchor: LabelTextAnchor\n    baseline: LabelBaseline\n}\n\ntype GetLabelPosition<Datum> = (node: ComputedNode<Datum>) => LabelPositionResult\n\ninterface LabelPositionFactoryProps {\n    orient: boolean\n    offset: number\n}\n\nconst horizontalLabelBefore = (x: number, y: number, offset: number): LabelPositionResult => ({\n    x: x - offset,\n    y: y,\n    rotation: 0,\n    textAnchor: 'end',\n    baseline: 'middle',\n})\n\nconst horizontalLabelAfter = (x: number, y: number, offset: number): LabelPositionResult => ({\n    x: x + offset,\n    y: y,\n    rotation: 0,\n    textAnchor: 'start',\n    baseline: 'middle',\n})\n\nconst verticalLabelBefore = (x: number, y: number, offset: number): LabelPositionResult => ({\n    x: x,\n    y: y - offset,\n    rotation: 0,\n    textAnchor: 'middle',\n    baseline: 'auto',\n})\n\nconst verticalLabelBeforeOriented = (\n    x: number,\n    y: number,\n    offset: number\n): LabelPositionResult => ({\n    x: x,\n    y: y - offset,\n    rotation: -90,\n    textAnchor: 'start',\n    baseline: 'middle',\n})\n\nconst verticalLabelAfter = (x: number, y: number, offset: number): LabelPositionResult => ({\n    x: x,\n    y: y + offset,\n    rotation: 0,\n    textAnchor: 'middle',\n    baseline: 'hanging',\n})\n\nconst verticalLabelAfterOriented = (x: number, y: number, offset: number): LabelPositionResult => ({\n    x: x,\n    y: y + offset,\n    rotation: -90,\n    textAnchor: 'end',\n    baseline: 'middle',\n})\n\nconst verticalLeavesBeforeOthersAfter =\n    <Datum>({ orient, offset }: LabelPositionFactoryProps): GetLabelPosition<Datum> =>\n    (node: ComputedNode<Datum>) => {\n        const spacing = node.size / 2 + offset\n        if (node.isLeaf) {\n            if (orient) return verticalLabelBeforeOriented(node.x, node.y, spacing)\n            else return verticalLabelBefore(node.x, node.y, spacing)\n        } else {\n            if (orient) return verticalLabelAfterOriented(node.x, node.y, spacing)\n            else return verticalLabelAfter(node.x, node.y, spacing)\n        }\n    }\n\nconst verticalLeavesAfterOthersBefore =\n    <Datum>({ orient, offset }: LabelPositionFactoryProps): GetLabelPosition<Datum> =>\n    (node: ComputedNode<Datum>) => {\n        const spacing = node.size / 2 + offset\n        if (node.isLeaf) {\n            if (orient) return verticalLabelAfterOriented(node.x, node.y, spacing)\n            else return verticalLabelAfter(node.x, node.y, spacing)\n        } else {\n            if (orient) return verticalLabelBeforeOriented(node.x, node.y, spacing)\n            else return verticalLabelBefore(node.x, node.y, spacing)\n        }\n    }\n\nconst verticalAllBefore =\n    <Datum>({ orient, offset }: LabelPositionFactoryProps): GetLabelPosition<Datum> =>\n    (node: ComputedNode<Datum>) => {\n        const spacing = node.size / 2 + offset\n        if (orient) return verticalLabelBeforeOriented(node.x, node.y, spacing)\n        else return verticalLabelBefore(node.x, node.y, spacing)\n    }\n\nconst verticalAllAfter =\n    <Datum>({ orient, offset }: LabelPositionFactoryProps): GetLabelPosition<Datum> =>\n    (node: ComputedNode<Datum>) => {\n        const spacing = node.size / 2 + offset\n        if (orient) return verticalLabelAfterOriented(node.x, node.y, spacing)\n        else return verticalLabelAfter(node.x, node.y, spacing)\n    }\n\nconst horizontalLeavesBeforeOthersAfter =\n    <Datum>({ offset }: LabelPositionFactoryProps): GetLabelPosition<Datum> =>\n    (node: ComputedNode<Datum>) => {\n        const spacing = node.size / 2 + offset\n        if (node.isLeaf) return horizontalLabelBefore(node.x, node.y, spacing)\n        else return horizontalLabelAfter(node.x, node.y, spacing)\n    }\n\nconst horizontalLeavesAfterOthersBefore =\n    <Datum>({ offset }: LabelPositionFactoryProps): GetLabelPosition<Datum> =>\n    (node: ComputedNode<Datum>) => {\n        const spacing = node.size / 2 + offset\n        if (node.isLeaf) return horizontalLabelAfter(node.x, node.y, spacing)\n        return horizontalLabelBefore(node.x, node.y, spacing)\n    }\n\nconst horizontalAllBefore =\n    <Datum>({ offset }: LabelPositionFactoryProps): GetLabelPosition<Datum> =>\n    (node: ComputedNode<Datum>) => {\n        return horizontalLabelBefore(node.x, node.y, node.size / 2 + offset)\n    }\n\nconst horizontalAllAfter =\n    <Datum>({ offset }: LabelPositionFactoryProps): GetLabelPosition<Datum> =>\n    (node: ComputedNode<Datum>) => {\n        return horizontalLabelAfter(node.x, node.y, node.size / 2 + offset)\n    }\n\nconst useGetLabelPosition = <Datum>({\n    layout,\n    labelsPosition,\n    orientLabel,\n    labelOffset,\n}: {\n    layout: Layout\n    labelsPosition: LabelsPosition\n    orientLabel: boolean\n    labelOffset: number\n}) =>\n    useMemo(() => {\n        const options: LabelPositionFactoryProps = {\n            orient: orientLabel,\n            offset: labelOffset,\n        }\n\n        if (layout === 'top-to-bottom') {\n            if (labelsPosition === 'outward') {\n                return verticalLeavesAfterOthersBefore<Datum>(options)\n            } else if (labelsPosition === 'inward') {\n                return verticalLeavesBeforeOthersAfter<Datum>(options)\n            } else if (labelsPosition === 'layout') {\n                return verticalAllAfter<Datum>(options)\n            } else if (labelsPosition === 'layout-opposite') {\n                return verticalAllBefore<Datum>(options)\n            }\n        }\n\n        if (layout === 'bottom-to-top') {\n            if (labelsPosition === 'outward') {\n                return verticalLeavesBeforeOthersAfter<Datum>(options)\n            } else if (labelsPosition === 'inward') {\n                return verticalLeavesAfterOthersBefore<Datum>(options)\n            } else if (labelsPosition === 'layout') {\n                return verticalAllBefore<Datum>(options)\n            } else if (labelsPosition === 'layout-opposite') {\n                return verticalAllAfter<Datum>(options)\n            }\n        }\n\n        if (layout === 'right-to-left') {\n            if (labelsPosition === 'outward') {\n                return horizontalLeavesBeforeOthersAfter<Datum>(options)\n            } else if (labelsPosition === 'inward') {\n                return horizontalLeavesAfterOthersBefore<Datum>(options)\n            } else if (labelsPosition === 'layout') {\n                return horizontalAllBefore<Datum>(options)\n            } else if (labelsPosition === 'layout-opposite') {\n                return horizontalAllAfter<Datum>(options)\n            }\n        }\n\n        if (layout === 'left-to-right') {\n            if (labelsPosition === 'outward') {\n                return horizontalLeavesAfterOthersBefore<Datum>(options)\n            } else if (labelsPosition === 'inward') {\n                return horizontalLeavesBeforeOthersAfter<Datum>(options)\n            } else if (labelsPosition === 'layout') {\n                return horizontalAllAfter<Datum>(options)\n            } else if (labelsPosition === 'layout-opposite') {\n                return horizontalAllBefore<Datum>(options)\n            }\n        }\n    }, [layout, labelsPosition, orientLabel, labelOffset])\n\nexport const useLabels = <Datum>({\n    nodes,\n    label,\n    layout,\n    labelsPosition,\n    orientLabel,\n    labelOffset,\n}: {\n    nodes: readonly ComputedNode<Datum>[]\n    label: Exclude<CommonProps<Datum>['label'], undefined>\n    layout: Layout\n    labelsPosition: LabelsPosition\n    orientLabel: boolean\n    labelOffset: number\n}) => {\n    const getLabel = usePropertyAccessor(label)\n    const getPosition = useGetLabelPosition<Datum>({\n        layout,\n        labelsPosition,\n        orientLabel,\n        labelOffset,\n    })\n\n    if (getPosition === undefined) {\n        throw new Error('Unable to determine the logic to compute labels position')\n    }\n\n    return useMemo(\n        () =>\n            nodes.map(\n                node =>\n                    ({\n                        id: node.uid,\n                        node: node,\n                        label: getLabel(node),\n                        ...getPosition(node),\n                    }) as ComputedLabel<Datum>\n            ),\n        [nodes, getLabel, getPosition]\n    )\n}\n","import { createElement } from 'react'\nimport { useTransition } from '@react-spring/web'\nimport { useMotionConfig } from '@nivo/core'\nimport {\n    CommonProps,\n    ComputedLabel,\n    ComputedNode,\n    LabelAnimatedProps,\n    LabelComponent,\n    LabelsPosition,\n    Layout,\n} from './types'\nimport { useLabels } from './labelsHooks'\n\ninterface LabelsProps<Datum> {\n    nodes: readonly ComputedNode<Datum>[]\n    label: Exclude<CommonProps<Datum>['label'], undefined>\n    layout: Layout\n    labelsPosition: LabelsPosition\n    orientLabel: boolean\n    labelOffset: number\n    labelComponent: LabelComponent<Datum>\n}\n\nconst regularTransition = <Datum,>(label: ComputedLabel<Datum>): LabelAnimatedProps => ({\n    x: label.x,\n    y: label.y,\n    rotation: label.rotation,\n})\nconst leaveTransition = <Datum,>(label: ComputedLabel<Datum>): LabelAnimatedProps => ({\n    x: label.x,\n    y: label.y,\n    rotation: label.rotation,\n})\n\nexport const Labels = <Datum,>({\n    nodes,\n    label,\n    layout,\n    labelsPosition,\n    orientLabel,\n    labelOffset,\n    labelComponent,\n}: LabelsProps<Datum>) => {\n    const labels = useLabels({ nodes, label, layout, labelsPosition, orientLabel, labelOffset })\n\n    const { animate, config: springConfig } = useMotionConfig()\n\n    const transition = useTransition<ComputedLabel<Datum>, LabelAnimatedProps>(labels, {\n        keys: label => label.id,\n        from: regularTransition,\n        enter: regularTransition,\n        update: regularTransition,\n        leave: leaveTransition,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    return (\n        <g\n            style={{\n                pointerEvents: 'none',\n            }}\n        >\n            {transition((animatedProps, label) =>\n                createElement(labelComponent, {\n                    label,\n                    animatedProps,\n                })\n            )}\n        </g>\n    )\n}\n","import { useMemo } from 'react'\nimport { createElement, memo } from 'react'\nimport { Margin } from '@nivo/core'\nimport { TooltipAnchor, TooltipPosition } from '@nivo/tooltip'\nimport { Mesh as BaseMesh } from '@nivo/voronoi'\nimport { ComputedNode, CurrentNodeSetter, NodeMouseEventHandler, NodeTooltip } from './types'\n\ninterface MeshProps<Datum> {\n    nodes: ComputedNode<Datum>[]\n    width: number\n    height: number\n    margin: Margin\n    onMouseEnter?: NodeMouseEventHandler<Datum>\n    onMouseMove?: NodeMouseEventHandler<Datum>\n    onMouseLeave?: NodeMouseEventHandler<Datum>\n    onMouseDown?: NodeMouseEventHandler<Datum>\n    onMouseUp?: NodeMouseEventHandler<Datum>\n    onClick?: NodeMouseEventHandler<Datum>\n    onDoubleClick?: NodeMouseEventHandler<Datum>\n    setCurrentNode: CurrentNodeSetter<Datum>\n    tooltip?: NodeTooltip<Datum>\n    tooltipPosition?: TooltipPosition\n    tooltipAnchor?: TooltipAnchor\n    detectionRadius: number\n    debug: boolean\n}\n\nconst NonMemoizedMesh = <Datum,>({\n    nodes,\n    width,\n    height,\n    margin,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onMouseDown,\n    onMouseUp,\n    onClick,\n    onDoubleClick,\n    setCurrentNode,\n    tooltip,\n    tooltipPosition,\n    tooltipAnchor,\n    detectionRadius,\n    debug,\n}: MeshProps<Datum>) => {\n    const renderTooltip = useMemo(() => {\n        if (!tooltip) return undefined\n        return (node: ComputedNode<Datum>) => createElement(tooltip, { node })\n    }, [tooltip])\n\n    /*\n    const handleMouseEnter = useCallback(\n        (node: ComputedNode<Datum>, event: MouseEvent) => {\n            setCurrentNode(node)\n            if (tooltip !== undefined) {\n                showTooltipAt(\n                    createElement(tooltip, { node }),\n                    [node.x + margin.left, node.y ?? 0 + margin.top],\n                    'top'\n                )\n            }\n            onMouseEnter && onMouseEnter(node, event)\n        },\n        [showTooltipAt, tooltip, margin.left, margin.top, setCurrentNode, onMouseEnter]\n    )\n\n    const handleMouseMove = useCallback(\n        (node: ComputedNode<Datum>, event: MouseEvent) => {\n            setCurrentNode(node)\n            if (tooltip !== undefined) {\n                showTooltipAt(\n                    createElement(tooltip, { node }),\n                    [node.x + margin.left, node.y ?? 0 + margin.top],\n                    'top'\n                )\n            }\n            onMouseMove && onMouseMove(node, event)\n        },\n        [showTooltipAt, tooltip, margin.left, margin.top, setCurrentNode, onMouseMove]\n    )\n\n    const handleMouseLeave = useCallback(\n        (node: ComputedNode<Datum>, event: MouseEvent) => {\n            setCurrentNode(null)\n            hideTooltip()\n            onMouseLeave && onMouseLeave(node, event)\n        },\n        [hideTooltip, setCurrentNode, onMouseLeave]\n    )\n\n    const handleClick = useCallback(\n        (node: ComputedNode<Datum>, event: MouseEvent) => {\n            onClick && onClick(node, event)\n        },\n        [onClick]\n    )\n    */\n\n    return (\n        <BaseMesh<ComputedNode<Datum>>\n            nodes={nodes}\n            width={width}\n            height={height}\n            margin={margin}\n            detectionRadius={detectionRadius}\n            setCurrent={setCurrentNode}\n            onMouseEnter={onMouseEnter}\n            onMouseMove={onMouseMove}\n            onMouseLeave={onMouseLeave}\n            onMouseDown={onMouseDown}\n            onMouseUp={onMouseUp}\n            onClick={onClick}\n            onDoubleClick={onDoubleClick}\n            tooltip={renderTooltip}\n            tooltipPosition={tooltipPosition}\n            tooltipAnchor={tooltipAnchor}\n            debug={debug}\n        />\n    )\n}\n\nexport const Mesh = memo(NonMemoizedMesh) as typeof NonMemoizedMesh\n","import { createElement, Fragment, ReactNode, useMemo } from 'react'\nimport { Container, useDimensions, SvgWrapper } from '@nivo/core'\nimport { DefaultDatum, LayerId, TreeSvgProps, CustomSvgLayerProps } from './types'\nimport { svgDefaultProps } from './defaults'\nimport { useTree } from './hooks'\nimport { Links } from './Links'\nimport { Nodes } from './Nodes'\nimport { Labels } from './Labels'\nimport { Mesh } from './Mesh'\n\ntype InnerTreeProps<Datum> = Omit<\n    TreeSvgProps<Datum>,\n    'animate' | 'motionConfig' | 'renderWrapper' | 'theme'\n>\n\nconst InnerTree = <Datum,>({\n    width,\n    height,\n    margin: partialMargin,\n    data,\n    identity,\n    mode = svgDefaultProps.mode,\n    layout = svgDefaultProps.layout,\n    nodeSize = svgDefaultProps.nodeSize,\n    activeNodeSize,\n    inactiveNodeSize,\n    nodeColor = svgDefaultProps.nodeColor,\n    fixNodeColorAtDepth = svgDefaultProps.fixNodeColorAtDepth,\n    nodeComponent = svgDefaultProps.nodeComponent,\n    linkCurve = svgDefaultProps.linkCurve,\n    linkThickness = svgDefaultProps.linkThickness,\n    activeLinkThickness,\n    inactiveLinkThickness,\n    linkColor = svgDefaultProps.linkColor,\n    linkComponent = svgDefaultProps.linkComponent,\n    enableLabel = svgDefaultProps.enableLabel,\n    label = svgDefaultProps.label,\n    labelsPosition = svgDefaultProps.labelsPosition,\n    orientLabel = svgDefaultProps.orientLabel,\n    labelOffset = svgDefaultProps.labelOffset,\n    labelComponent = svgDefaultProps.labelComponent,\n    layers = svgDefaultProps.layers,\n    isInteractive = svgDefaultProps.isInteractive,\n    useMesh = svgDefaultProps.useMesh,\n    meshDetectionRadius = svgDefaultProps.meshDetectionRadius,\n    debugMesh = svgDefaultProps.debugMesh,\n    highlightAncestorNodes = svgDefaultProps.highlightAncestorNodes,\n    highlightDescendantNodes = svgDefaultProps.highlightDescendantNodes,\n    highlightAncestorLinks = svgDefaultProps.highlightAncestorLinks,\n    highlightDescendantLinks = svgDefaultProps.highlightDescendantLinks,\n    onNodeMouseEnter,\n    onNodeMouseMove,\n    onNodeMouseLeave,\n    onNodeMouseDown,\n    onNodeMouseUp,\n    onNodeClick,\n    onNodeDoubleClick,\n    nodeTooltip,\n    nodeTooltipPosition = svgDefaultProps.nodeTooltipPosition,\n    nodeTooltipAnchor = svgDefaultProps.nodeTooltipAnchor,\n    onLinkMouseEnter,\n    onLinkMouseMove,\n    onLinkMouseLeave,\n    onLinkMouseDown,\n    onLinkMouseUp,\n    onLinkClick,\n    onLinkDoubleClick,\n    linkTooltip,\n    linkTooltipAnchor = svgDefaultProps.linkTooltipAnchor,\n    role = svgDefaultProps.role,\n    ariaLabel,\n    ariaLabelledBy,\n    ariaDescribedBy,\n}: InnerTreeProps<Datum>) => {\n    const { outerWidth, outerHeight, margin, innerWidth, innerHeight } = useDimensions(\n        width,\n        height,\n        partialMargin\n    )\n\n    const { nodes, nodeByUid, links, linkGenerator, setCurrentNode } = useTree<Datum>({\n        data,\n        identity,\n        layout,\n        mode,\n        width: innerWidth,\n        height: innerHeight,\n        nodeSize,\n        activeNodeSize,\n        inactiveNodeSize,\n        nodeColor,\n        fixNodeColorAtDepth,\n        highlightAncestorNodes,\n        highlightDescendantNodes,\n        linkCurve,\n        linkThickness,\n        activeLinkThickness,\n        inactiveLinkThickness,\n        linkColor,\n        highlightAncestorLinks,\n        highlightDescendantLinks,\n    })\n\n    const layerById: Record<LayerId, ReactNode> = {\n        links: null,\n        nodes: null,\n        labels: null,\n        mesh: null,\n    }\n\n    if (layers.includes('links')) {\n        layerById.links = (\n            <Links<Datum>\n                key=\"links\"\n                links={links}\n                linkComponent={linkComponent}\n                linkGenerator={linkGenerator}\n                isInteractive={isInteractive}\n                onMouseEnter={onLinkMouseEnter}\n                onMouseMove={onLinkMouseMove}\n                onMouseLeave={onLinkMouseLeave}\n                onMouseDown={onLinkMouseDown}\n                onMouseUp={onLinkMouseUp}\n                onClick={onLinkClick}\n                onDoubleClick={onLinkDoubleClick}\n                tooltip={linkTooltip}\n                tooltipAnchor={linkTooltipAnchor}\n            />\n        )\n    }\n\n    if (layers.includes('nodes')) {\n        layerById.nodes = (\n            <Nodes<Datum>\n                key=\"nodes\"\n                nodes={nodes}\n                nodeComponent={nodeComponent}\n                isInteractive={isInteractive}\n                onMouseEnter={onNodeMouseEnter}\n                onMouseMove={onNodeMouseMove}\n                onMouseLeave={onNodeMouseLeave}\n                onMouseDown={onNodeMouseDown}\n                onMouseUp={onNodeMouseUp}\n                onClick={onNodeClick}\n                onDoubleClick={onNodeDoubleClick}\n                setCurrentNode={setCurrentNode}\n                tooltip={nodeTooltip}\n                tooltipPosition={nodeTooltipPosition}\n                tooltipAnchor={nodeTooltipAnchor}\n                margin={margin}\n            />\n        )\n    }\n\n    if (layers.includes('labels') && enableLabel) {\n        layerById.labels = (\n            <Labels<Datum>\n                key=\"labels\"\n                label={label}\n                nodes={nodes}\n                layout={layout}\n                labelsPosition={labelsPosition}\n                orientLabel={orientLabel}\n                labelOffset={labelOffset}\n                labelComponent={labelComponent}\n            />\n        )\n    }\n\n    if (layers.includes('mesh') && isInteractive && useMesh) {\n        layerById.mesh = (\n            <Mesh<Datum>\n                key=\"mesh\"\n                nodes={nodes}\n                width={innerWidth}\n                height={innerHeight}\n                margin={margin}\n                detectionRadius={meshDetectionRadius}\n                debug={debugMesh}\n                onMouseEnter={onNodeMouseEnter}\n                onMouseMove={onNodeMouseMove}\n                onMouseLeave={onNodeMouseLeave}\n                onMouseDown={onNodeMouseDown}\n                onMouseUp={onNodeMouseUp}\n                onClick={onNodeClick}\n                onDoubleClick={onNodeDoubleClick}\n                tooltip={nodeTooltip}\n                tooltipPosition={nodeTooltipPosition}\n                tooltipAnchor={nodeTooltipAnchor}\n                setCurrentNode={setCurrentNode}\n            />\n        )\n    }\n\n    const customLayerProps: CustomSvgLayerProps<Datum> = useMemo(\n        () => ({\n            nodes,\n            nodeByUid,\n            links,\n            innerWidth,\n            innerHeight,\n            linkGenerator,\n            setCurrentNode,\n        }),\n        [nodes, nodeByUid, links, innerWidth, innerHeight, linkGenerator, setCurrentNode]\n    )\n\n    return (\n        <SvgWrapper\n            width={outerWidth}\n            height={outerHeight}\n            margin={margin}\n            role={role}\n            ariaLabel={ariaLabel}\n            ariaLabelledBy={ariaLabelledBy}\n            ariaDescribedBy={ariaDescribedBy}\n        >\n            {layers.map((layer, i) => {\n                if (typeof layer === 'function') {\n                    return <Fragment key={i}>{createElement(layer, customLayerProps)}</Fragment>\n                }\n\n                return layerById?.[layer] ?? null\n            })}\n        </SvgWrapper>\n    )\n}\n\nexport const Tree = <Datum = DefaultDatum,>({\n    isInteractive = svgDefaultProps.isInteractive,\n    animate = svgDefaultProps.animate,\n    motionConfig = svgDefaultProps.motionConfig,\n    theme,\n    renderWrapper,\n    ...otherProps\n}: TreeSvgProps<Datum>) => (\n    <Container\n        {...{\n            animate,\n            isInteractive,\n            motionConfig,\n            renderWrapper,\n            theme,\n        }}\n    >\n        <InnerTree<Datum> isInteractive={isInteractive} {...otherProps} />\n    </Container>\n)\n","import { ResponsiveWrapper } from '@nivo/core'\nimport { ResponsiveTreeSvgProps, DefaultDatum } from './types'\nimport { Tree } from './Tree'\n\nexport const ResponsiveTree = <Datum = DefaultDatum,>(props: ResponsiveTreeSvgProps<Datum>) => (\n    <ResponsiveWrapper>\n        {({ width, height }) => <Tree<Datum> width={width} height={height} {...props} />}\n    </ResponsiveWrapper>\n)\n","import { useEffect, useMemo, useRef, createElement } from 'react'\nimport { Container, useDimensions } from '@nivo/core'\nimport { useTheme } from '@nivo/theming'\nimport { setCanvasFont } from '@nivo/text'\nimport { useMesh, renderDebugToCanvas } from '@nivo/voronoi'\nimport { DefaultDatum, TreeCanvasProps, CustomCanvasLayerProps, ComputedNode } from './types'\nimport { canvasDefaultProps } from './defaults'\nimport { useTree } from './hooks'\nimport { useLabels } from './labelsHooks'\n\ntype InnerTreeCanvasProps<Datum> = Omit<\n    TreeCanvasProps<Datum>,\n    'animate' | 'motionConfig' | 'renderWrapper' | 'theme'\n>\n\nconst InnerTreeCanvas = <Datum,>({\n    width,\n    height,\n    pixelRatio = canvasDefaultProps.pixelRatio,\n    margin: partialMargin,\n    data,\n    identity,\n    mode = canvasDefaultProps.mode,\n    layout = canvasDefaultProps.layout,\n    nodeSize = canvasDefaultProps.nodeSize,\n    activeNodeSize,\n    inactiveNodeSize,\n    nodeColor = canvasDefaultProps.nodeColor,\n    fixNodeColorAtDepth = canvasDefaultProps.fixNodeColorAtDepth,\n    renderNode = canvasDefaultProps.renderNode,\n    linkCurve = canvasDefaultProps.linkCurve,\n    linkThickness = canvasDefaultProps.linkThickness,\n    activeLinkThickness,\n    inactiveLinkThickness,\n    linkColor = canvasDefaultProps.linkColor,\n    renderLink = canvasDefaultProps.renderLink,\n    enableLabel = canvasDefaultProps.enableLabel,\n    label = canvasDefaultProps.label,\n    labelsPosition = canvasDefaultProps.labelsPosition,\n    orientLabel = canvasDefaultProps.orientLabel,\n    labelOffset = canvasDefaultProps.labelOffset,\n    renderLabel = canvasDefaultProps.renderLabel,\n    layers = canvasDefaultProps.layers,\n    isInteractive = canvasDefaultProps.isInteractive,\n    meshDetectionRadius = canvasDefaultProps.meshDetectionRadius,\n    debugMesh = canvasDefaultProps.debugMesh,\n    highlightAncestorNodes = canvasDefaultProps.highlightAncestorNodes,\n    highlightDescendantNodes = canvasDefaultProps.highlightDescendantNodes,\n    highlightAncestorLinks = canvasDefaultProps.highlightAncestorLinks,\n    highlightDescendantLinks = canvasDefaultProps.highlightDescendantLinks,\n    onNodeMouseEnter,\n    onNodeMouseMove,\n    onNodeMouseLeave,\n    onNodeMouseDown,\n    onNodeMouseUp,\n    onNodeClick,\n    onNodeDoubleClick,\n    nodeTooltip,\n    nodeTooltipPosition = canvasDefaultProps.nodeTooltipPosition,\n    nodeTooltipAnchor = canvasDefaultProps.nodeTooltipAnchor,\n    role = canvasDefaultProps.role,\n    ariaLabel,\n    ariaLabelledBy,\n    ariaDescribedBy,\n}: InnerTreeCanvasProps<Datum>) => {\n    const canvasEl = useRef<HTMLCanvasElement | null>(null)\n\n    const { outerWidth, outerHeight, margin, innerWidth, innerHeight } = useDimensions(\n        width,\n        height,\n        partialMargin\n    )\n\n    const theme = useTheme()\n\n    const { nodes, nodeByUid, links, linkGenerator, setCurrentNode } = useTree<Datum>({\n        data,\n        identity,\n        layout,\n        mode,\n        width: innerWidth,\n        height: innerHeight,\n        nodeSize,\n        activeNodeSize,\n        inactiveNodeSize,\n        nodeColor,\n        fixNodeColorAtDepth,\n        highlightAncestorNodes,\n        highlightDescendantNodes,\n        linkCurve,\n        linkThickness,\n        activeLinkThickness,\n        inactiveLinkThickness,\n        linkColor,\n        highlightAncestorLinks,\n        highlightDescendantLinks,\n    })\n\n    const labels = useLabels<Datum>({\n        nodes,\n        label,\n        layout,\n        labelsPosition,\n        orientLabel,\n        labelOffset,\n    })\n\n    const renderTooltip = useMemo(() => {\n        if (!nodeTooltip) return undefined\n        return (node: ComputedNode<Datum>) => createElement(nodeTooltip, { node })\n    }, [nodeTooltip])\n\n    const {\n        delaunay,\n        voronoi,\n        handleMouseEnter,\n        handleMouseMove,\n        handleMouseLeave,\n        handleMouseDown,\n        handleMouseUp,\n        handleClick,\n        handleDoubleClick,\n        current,\n    } = useMesh<ComputedNode<Datum>, HTMLCanvasElement>({\n        elementRef: canvasEl,\n        nodes,\n        width: innerWidth,\n        height: innerHeight,\n        margin,\n        detectionRadius: meshDetectionRadius,\n        isInteractive,\n        setCurrent: setCurrentNode,\n        onMouseEnter: onNodeMouseEnter,\n        onMouseMove: onNodeMouseMove,\n        onMouseLeave: onNodeMouseLeave,\n        onMouseDown: onNodeMouseDown,\n        onMouseUp: onNodeMouseUp,\n        onClick: onNodeClick,\n        onDoubleClick: onNodeDoubleClick,\n        tooltip: renderTooltip,\n        tooltipPosition: nodeTooltipPosition,\n        tooltipAnchor: nodeTooltipAnchor,\n        debug: debugMesh,\n    })\n\n    const customLayerProps: CustomCanvasLayerProps<Datum> = useMemo(\n        () => ({\n            nodes,\n            nodeByUid,\n            links,\n            innerWidth,\n            innerHeight,\n            linkGenerator,\n        }),\n        [nodes, nodeByUid, links, innerWidth, innerHeight, linkGenerator]\n    )\n\n    useEffect(() => {\n        if (canvasEl.current === null) return\n\n        canvasEl.current.width = outerWidth * pixelRatio\n        canvasEl.current.height = outerHeight * pixelRatio\n\n        const ctx = canvasEl.current.getContext('2d')!\n\n        ctx.scale(pixelRatio, pixelRatio)\n\n        ctx.fillStyle = theme.background\n        ctx.fillRect(0, 0, outerWidth, outerHeight)\n\n        ctx.translate(margin.left, margin.top)\n\n        layers.forEach(layer => {\n            if (layer === 'links') {\n                linkGenerator.context(ctx)\n\n                links.forEach(link => {\n                    renderLink(ctx, { link, linkGenerator })\n                })\n            } else if (layer === 'nodes') {\n                nodes.forEach(node => {\n                    renderNode(ctx, { node })\n                })\n            } else if (layer === 'labels' && enableLabel) {\n                setCanvasFont(ctx, theme.labels.text)\n\n                labels.forEach(label => {\n                    renderLabel(ctx, { label, theme })\n                })\n            } else if (layer === 'mesh' && debugMesh && voronoi) {\n                ctx.save()\n                // The mesh should cover the whole chart, including margins.\n                ctx.translate(-margin.left, -margin.top)\n\n                renderDebugToCanvas(ctx, {\n                    delaunay,\n                    voronoi,\n                    detectionRadius: meshDetectionRadius,\n                    index: current !== null ? current[0] : null,\n                })\n\n                ctx.restore()\n            } else if (typeof layer === 'function') {\n                layer(ctx, customLayerProps)\n            }\n        })\n    }, [\n        canvasEl,\n        outerWidth,\n        outerHeight,\n        pixelRatio,\n        margin.left,\n        margin.top,\n        theme,\n        layers,\n        nodes,\n        nodeByUid,\n        renderNode,\n        links,\n        renderLink,\n        linkGenerator,\n        labels,\n        enableLabel,\n        renderLabel,\n        delaunay,\n        voronoi,\n        meshDetectionRadius,\n        debugMesh,\n        current,\n        customLayerProps,\n    ])\n\n    return (\n        <canvas\n            ref={canvasEl}\n            width={outerWidth * pixelRatio}\n            height={outerHeight * pixelRatio}\n            style={{\n                width: outerWidth,\n                height: outerHeight,\n                cursor: isInteractive ? 'auto' : 'normal',\n            }}\n            onMouseEnter={handleMouseEnter}\n            onMouseMove={handleMouseMove}\n            onMouseLeave={handleMouseLeave}\n            onMouseDown={handleMouseDown}\n            onMouseUp={handleMouseUp}\n            onClick={handleClick}\n            onDoubleClick={handleDoubleClick}\n            role={role}\n            aria-label={ariaLabel}\n            aria-labelledby={ariaLabelledBy}\n            aria-describedby={ariaDescribedBy}\n        />\n    )\n}\n\nexport const TreeCanvas = <Datum = DefaultDatum,>({\n    isInteractive = canvasDefaultProps.isInteractive,\n    animate = canvasDefaultProps.animate,\n    motionConfig = canvasDefaultProps.motionConfig,\n    theme,\n    renderWrapper,\n    ...otherProps\n}: TreeCanvasProps<Datum>) => (\n    <Container\n        {...{\n            animate,\n            isInteractive,\n            motionConfig,\n            renderWrapper,\n            theme,\n        }}\n    >\n        <InnerTreeCanvas<Datum> isInteractive={isInteractive} {...otherProps} />\n    </Container>\n)\n","import { ResponsiveWrapper } from '@nivo/core'\nimport { ResponsiveTreeCanvasProps, DefaultDatum } from './types'\nimport { TreeCanvas } from './TreeCanvas'\n\nexport const ResponsiveTreeCanvas = <Datum = DefaultDatum,>(\n    props: ResponsiveTreeCanvasProps<Datum>\n) => (\n    <ResponsiveWrapper>\n        {({ width, height }) => <TreeCanvas<Datum> width={width} height={height} {...props} />}\n    </ResponsiveWrapper>\n)\n"],"names":["useRoot","_ref","data","mode","getIdentity","useMemo","root","d3Hierarchy","cluster","d3Tree","d3Cluster","eachBefore","node","ancestors","filter","ancestor","reverse","ancestorIds","map","uid","concat","join","ancestorUids","each","descendantUids","descendants","descendant","useNodeSizeModifier","size","undefined","useNodes","_ref3","xScale","yScale","layout","nodeSize","activeNodeSize","inactiveNodeSize","nodeColor","fixNodeColorAtDepth","intermediateNodes","x","y","id","path","isRoot","depth","isLeaf","height","getNodeSize","getActiveNodeSize","getInactiveNodeSize","getNodeColorBase","useOrdinalColorScale","getNodeColor","Infinity","nodeByUid","length","parent","color","_useState","useState","activeNodeUids","setActiveNodeUids","computed","nodes","intermediateNode","computedNode","_extends","isActive","includes","useLinkThicknessModifier","thickness","link","useTree","_ref7","width","_ref7$identity","identity","commonDefaultProps","_ref7$mode","_ref7$layout","_ref7$nodeSize","_ref7$nodeColor","_ref7$fixNodeColorAtD","_ref7$highlightAncest","highlightAncestorNodes","_ref7$highlightDescen","highlightDescendantNodes","_ref7$linkCurve","linkCurve","_ref7$linkThickness","linkThickness","_ref7$linkColor","linkColor","activeLinkThickness","inactiveLinkThickness","_ref7$highlightAncest2","highlightAncestorLinks","_ref7$highlightDescen2","highlightDescendantLinks","usePropertyAccessor","_useCartesianScales","_ref2","scaleLinear","domain","range","useCartesianScales","_useNodes","linkGenerator","_ref5","curve","curveFactory","curveLinear","curveBumpY","curveBumpX","curveStep","curveStepBefore","curveStepAfter","d3Link","useLinkGenerator","_useLinks","_ref4","intermediateLinks","links","source","target","getLinkThickness","getActiveLinkThickness","getInactiveLinkThickness","theme","useTheme","getLinkColor","useInheritedColor","_useState2","activeLinkIds","setActiveLinkIds","intermediateLink","computedLink","useLinks","setCurrentNode","_ref6","useCallback","nodeUids","linkIds","forEach","push","useSetCurrentNode","useNodeMouseEventHandlers","_ref8","isInteractive","onMouseEnter","onMouseMove","onMouseLeave","onMouseDown","onMouseUp","onClick","onDoubleClick","tooltip","tooltipPosition","tooltipAnchor","margin","_useTooltip","useTooltip","showTooltipFromEvent","showTooltipAt","hideTooltip","showTooltip","createElement","left","top","event","handleMouseEnter","handleMouseMove","handleMouseLeave","handleMouseDown","handleMouseUp","handleClick","handleDoubleClick","useLinkMouseEventHandlers","_ref9","_useTooltip2","scheme","from","modifiers","enableLabel","label","labelsPosition","orientLabel","labelOffset","useMesh","meshDetectionRadius","debugMesh","nodeTooltipPosition","nodeTooltipAnchor","role","animate","motionConfig","svgDefaultProps","layers","nodeComponent","animatedProps","eventHandlers","_jsx","animated","circle","r","to","fill","cx","cy","linkComponent","d","sourceX","sourceY","targetX","targetY","strokeWidth","stroke","labelComponent","g","transform","children","rotation","Text","style","labels","text","textAnchor","dominantBaseline","baseline","linkTooltipAnchor","canvasDefaultProps","renderNode","ctx","beginPath","arc","Math","PI","fillStyle","renderLink","strokeStyle","lineWidth","renderLabel","save","translate","rotate","degreesToRadians","textBaseline","textAlign","drawCanvasText","restore","pixelRatio","window","devicePixelRatio","regularTransition","leaveTransition","Links","_useMotionConfig","useMotionConfig","springConfig","config","transition","useTransition","keys","enter","update","leave","immediate","_Fragment","Nodes","horizontalLabelBefore","offset","horizontalLabelAfter","verticalLabelBefore","verticalLabelBeforeOriented","verticalLabelAfter","verticalLabelAfterOriented","verticalLeavesBeforeOthersAfter","orient","spacing","verticalLeavesAfterOthersBefore","verticalAllBefore","verticalAllAfter","horizontalLeavesBeforeOthersAfter","horizontalLeavesAfterOthersBefore","horizontalAllBefore","horizontalAllAfter","useLabels","_ref10","getLabel","getPosition","options","useGetLabelPosition","Error","Labels","pointerEvents","Mesh","memo","detectionRadius","debug","renderTooltip","BaseMesh","setCurrent","InnerTree","partialMargin","_ref$mode","_ref$layout","_ref$nodeSize","_ref$nodeColor","_ref$fixNodeColorAtDe","_ref$nodeComponent","_ref$linkCurve","_ref$linkThickness","_ref$linkColor","_ref$linkComponent","_ref$enableLabel","_ref$label","_ref$labelsPosition","_ref$orientLabel","_ref$labelOffset","_ref$labelComponent","_ref$layers","_ref$isInteractive","_ref$useMesh","_ref$meshDetectionRad","_ref$debugMesh","_ref$highlightAncesto","_ref$highlightDescend","_ref$highlightAncesto2","_ref$highlightDescend2","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeMouseDown","onNodeMouseUp","onNodeClick","onNodeDoubleClick","nodeTooltip","_ref$nodeTooltipPosit","_ref$nodeTooltipAncho","onLinkMouseEnter","onLinkMouseMove","onLinkMouseLeave","onLinkMouseDown","onLinkMouseUp","onLinkClick","onLinkDoubleClick","linkTooltip","_ref$linkTooltipAncho","_ref$role","ariaLabel","ariaLabelledBy","ariaDescribedBy","_useDimensions","useDimensions","outerWidth","outerHeight","innerWidth","innerHeight","_useTree","layerById","mesh","customLayerProps","SvgWrapper","layer","i","_layerById$layer","Fragment","Tree","_ref2$isInteractive","_ref2$animate","_ref2$motionConfig","renderWrapper","otherProps","_objectWithoutPropertiesLoose","_excluded","Container","ResponsiveTree","props","ResponsiveWrapper","InnerTreeCanvas","_ref$pixelRatio","_ref$renderNode","_ref$renderLink","_ref$renderLabel","canvasEl","useRef","_useMesh","elementRef","delaunay","voronoi","current","useEffect","getContext","scale","background","fillRect","context","setCanvasFont","renderDebugToCanvas","index","ref","cursor","TreeCanvas","ResponsiveTreeCanvas"],"mappings":"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"}