"use strict";var e=require("react"),o=require("@nivo/core"),n=require("d3-scale"),i=require("d3-delaunay"),t=require("@nivo/tooltip"),l=require("react/jsx-runtime");function r(){return r=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(null,arguments)}var u={xDomain:[0,1],yDomain:[0,1],layers:["links","cells","points","bounds"],enableLinks:!1,linkLineWidth:1,linkLineColor:"#bbbbbb",enableCells:!0,cellLineWidth:2,cellLineColor:"#000000",enablePoints:!0,pointSize:4,pointColor:"#666666",role:"img"},a=function(e){return[e.x,e.y]},s=o.defaultMargin,d="cursor",c="top",h=function(e){var o=e.points,n=e.getNodePosition,i=void 0===n?a:n,t=e.margin,l=void 0===t?s:t;return o.map((function(e){var o=i(e),n=o[0],t=o[1];return[n+l.left,t+l.top]}))},v=function(e){var o=e.points,n=e.width,t=e.height,l=e.margin,r=void 0===l?s:l,u=e.debug,a=i.Delaunay.from(o),d=u?a.voronoi([0,0,r.left+n+r.right,r.top+t+r.bottom]):void 0;return{points:o,delaunay:a,voronoi:d}},p=function(o){var n=o.points,i=o.getNodePosition,t=void 0===i?a:i,l=o.width,r=o.height,u=o.margin,d=void 0===u?s:u,c=o.debug;return e.useMemo((function(){return v({points:h({points:n,margin:d,getNodePosition:t}),width:l,height:r,margin:d,debug:c})}),[t,n,l,r,d,c])},f=function(o){var t=o.data,l=o.width,r=o.height,u=o.xDomain,a=o.yDomain,s=e.useMemo((function(){return n.scaleLinear().domain(u).range([0,l])}),[u,l]),d=e.useMemo((function(){return n.scaleLinear().domain(a).range([0,r])}),[a,r]),c=e.useMemo((function(){return t.map((function(e){return{x:s(e.x),y:d(e.y),data:e}}))}),[t,s,d]);return e.useMemo((function(){var e=i.Delaunay.from(c.map((function(e){return[e.x,e.y]}))),o=e.voronoi([0,0,l,r]);return{points:c,delaunay:e,voronoi:o}}),[c,l,r])},M=function(o){var n=o.points,i=o.delaunay,t=o.voronoi;return e.useMemo((function(){return{points:n,delaunay:i,voronoi:t}}),[n,i,t])},g=function(n){var i=n.elementRef,l=n.nodes,r=n.getNodePosition,u=void 0===r?a:r,h=n.delaunay,v=n.setCurrent,p=n.margin,f=void 0===p?s:p,M=n.detectionRadius,g=void 0===M?1/0:M,b=n.isInteractive,k=void 0===b||b,m=n.onMouseEnter,C=n.onMouseMove,x=n.onMouseLeave,y=n.onMouseDown,D=n.onMouseUp,T=n.onClick,w=n.onDoubleClick,L=n.onTouchStart,P=n.onTouchMove,E=n.onTouchEnd,j=n.enableTouchCrosshair,W=void 0!==j&&j,R=n.tooltip,S=n.tooltipPosition,U=void 0===S?d:S,A=n.tooltipAnchor,N=void 0===A?c:A,V=e.useState(null),q=V[0],O=V[1],I=e.useRef(null);e.useEffect((function(){I.current=q}),[I,q]);var z=e.useCallback((function(e){if(!i.current||0===l.length)return null;var n=o.getRelativeCursor(i.current,e),t=n[0],r=n[1],a=h.find(t,r),s=void 0!==a?l[a]:null;if(s&&g!==1/0){var d=u(s),c=d[0],v=d[1];o.getDistance(t,r,c+f.left,v+f.top)>g&&(a=null,s=null)}return null===a||null===s?null:[a,s]}),[i,h,l,u,f,g]),F=t.useTooltip(),H=F.showTooltipAt,B=F.showTooltipFromEvent,G=F.hideTooltip,J=e.useMemo((function(){if(R)return"cursor"===U?function(e,o){B(R(e),o,N)}:function(e){var o=u(e),n=o[0],i=o[1];H(R(e),[n+f.left,i+f.top],N)}}),[H,B,R,U,N,u,f]),K=e.useCallback((function(e){var o=z(e);if(O(o),null==v||v(o?o[1]:null),o){var n=o[1];null==J||J(n,e),null==m||m(o[1],e)}}),[z,O,v,J,m]),Q=e.useCallback((function(e){var o=z(e);if(O(o),o){var n=o[0],i=o[1];if(null==v||v(i),null==J||J(i,e),I.current){var t=I.current,l=t[0],r=t[1];n!==l?null==x||x(r,e):null==C||C(i,e)}else null==m||m(i,e)}else null==v||v(null),null==G||G(),I.current&&(null==x||x(I.current[1],e))}),[z,O,v,I,m,C,x,J,G]),X=e.useCallback((function(e){O(null),null==v||v(null),G(),x&&I.current&&x(I.current[1],e)}),[O,v,I,G,x]),Y=e.useCallback((function(e){var o=z(e);O(o),o&&(null==y||y(o[1],e))}),[z,O,y]),Z=e.useCallback((function(e){var o=z(e);O(o),o&&(null==D||D(o[1],e))}),[z,O,D]),$=e.useCallback((function(e){var o=z(e);O(o),o&&(null==T||T(o[1],e))}),[z,O,T]),_=e.useCallback((function(e){var o=z(e);O(o),o&&(null==w||w(o[1],e))}),[z,O,w]),ee=e.useCallback((function(e){var o=z(e);W&&(O(o),null==v||v(o?o[1]:null)),o&&(null==L||L(o[1],e))}),[z,O,v,W,L]),oe=e.useCallback((function(e){var o=z(e);W&&(O(o),null==v||v(o?o[1]:null)),o&&(null==P||P(o[1],e))}),[z,O,v,W,P]),ne=e.useCallback((function(e){W&&(O(null),null==v||v(null)),E&&I.current&&E(I.current[1],e)}),[W,O,v,E,I]);return{current:q,handleMouseEnter:k?K:void 0,handleMouseMove:k?Q:void 0,handleMouseLeave:k?X:void 0,handleMouseDown:k?Y:void 0,handleMouseUp:k?Z:void 0,handleClick:k?$:void 0,handleDoubleClick:k?_:void 0,handleTouchStart:k?ee:void 0,handleTouchMove:k?oe:void 0,handleTouchEnd:k?ne:void 0}},b=["theme"],k=function(n){var i=n.data,t=n.width,r=n.height,a=n.margin,s=n.layers,d=void 0===s?u.layers:s,c=n.xDomain,h=void 0===c?u.xDomain:c,v=n.yDomain,p=void 0===v?u.yDomain:v,g=n.enableLinks,b=void 0===g?u.enableLinks:g,k=n.linkLineWidth,m=void 0===k?u.linkLineWidth:k,C=n.linkLineColor,x=void 0===C?u.linkLineColor:C,y=n.enableCells,D=void 0===y?u.enableCells:y,T=n.cellLineWidth,w=void 0===T?u.cellLineWidth:T,L=n.cellLineColor,P=void 0===L?u.cellLineColor:L,E=n.enablePoints,j=void 0===E?u.enableCells:E,W=n.pointSize,R=void 0===W?u.pointSize:W,S=n.pointColor,U=void 0===S?u.pointColor:S,A=n.role,N=void 0===A?u.role:A,V=o.useDimensions(t,r,a),q=V.outerWidth,O=V.outerHeight,I=V.margin,z=V.innerWidth,F=V.innerHeight,H=f({data:i,width:z,height:F,xDomain:h,yDomain:p}),B=H.points,G=H.delaunay,J=H.voronoi,K={links:null,cells:null,points:null,bounds:null};b&&d.includes("links")&&(K.links=l.jsx("path",{stroke:x,strokeWidth:m,fill:"none",d:G.render()},"links")),D&&d.includes("cells")&&(K.cells=l.jsx("path",{d:J.render(),fill:"none",stroke:P,strokeWidth:w},"cells")),j&&d.includes("points")&&(K.points=l.jsx("path",{stroke:"none",fill:U,d:G.renderPoints(void 0,R/2)},"points")),d.includes("bounds")&&(K.bounds=l.jsx("path",{fill:"none",stroke:P,strokeWidth:w,d:J.renderBounds()},"bounds"));var Q=M({points:B,delaunay:G,voronoi:J});return l.jsx(o.SvgWrapper,{width:q,height:O,margin:I,role:N,children:d.map((function(o,n){return void 0!==K[o]?K[o]:"function"==typeof o?l.jsx(e.Fragment,{children:e.createElement(o,Q)},n):null}))})},m=function(e){var n=e.theme,i=function(e,o){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==o.indexOf(i))continue;n[i]=e[i]}return n}(e,b);return l.jsx(o.Container,{isInteractive:!1,animate:!1,theme:n,children:l.jsx(k,r({},i))})},C=function(e,o){e.save(),e.globalAlpha=.75,e.beginPath(),o.render(e),e.strokeStyle="red",e.lineWidth=1,e.stroke(),e.restore()},x=function(e,o,n){e.save(),e.globalAlpha=.15,e.beginPath(),o.renderPoints(e,n),e.strokeStyle="red",e.lineWidth=1,e.stroke(),e.restore()},y=function(e,o,n){e.save(),e.globalAlpha=.35,e.beginPath(),o.renderCell(n,e),e.fillStyle="pink",e.fill(),e.restore()};exports.Mesh=function(o){var n=o.nodes,i=o.width,t=o.height,r=o.margin,u=void 0===r?s:r,a=o.getNodePosition,h=o.setCurrent,v=o.onMouseEnter,f=o.onMouseMove,M=o.onMouseLeave,b=o.onMouseDown,k=o.onMouseUp,m=o.onClick,C=o.onDoubleClick,x=o.onTouchStart,y=o.onTouchMove,D=o.onTouchEnd,T=o.enableTouchCrosshair,w=void 0!==T&&T,L=o.detectionRadius,P=void 0===L?1/0:L,E=o.tooltip,j=o.tooltipPosition,W=void 0===j?d:j,R=o.tooltipAnchor,S=void 0===R?c:R,U=o.debug,A=e.useRef(null),N=p({points:n,getNodePosition:a,width:i,height:t,margin:u,debug:U}),V=N.delaunay,q=N.voronoi,O=g({elementRef:A,nodes:n,delaunay:V,margin:u,detectionRadius:P,setCurrent:h,onMouseEnter:v,onMouseMove:f,onMouseLeave:M,onMouseDown:b,onMouseUp:k,onClick:m,onDoubleClick:C,onTouchStart:x,onTouchMove:y,onTouchEnd:D,enableTouchCrosshair:w,tooltip:E,tooltipPosition:W,tooltipAnchor:S}),I=O.current,z=O.handleMouseEnter,F=O.handleMouseMove,H=O.handleMouseLeave,B=O.handleMouseDown,G=O.handleMouseUp,J=O.handleClick,K=O.handleDoubleClick,Q=O.handleTouchStart,X=O.handleTouchMove,Y=O.handleTouchEnd,Z=e.useMemo((function(){if(U&&q)return q.render()}),[U,q]);return l.jsxs("g",{ref:A,transform:"translate("+-u.left+","+-u.top+")",children:[U&&q&&l.jsxs(l.Fragment,{children:[l.jsx("path",{d:Z,stroke:"red",strokeWidth:1,opacity:.75}),P<1/0&&l.jsx("path",{stroke:"red",strokeWidth:.35,fill:"none",d:V.renderPoints(void 0,P)}),I&&l.jsx("path",{fill:"pink",opacity:.35,d:q.renderCell(I[0])})]}),l.jsx("rect",{"data-ref":"mesh-interceptor",width:u.left+i+u.right,height:u.top+t+u.bottom,fill:"red",opacity:0,style:{cursor:"auto"},onMouseEnter:z,onMouseMove:F,onMouseLeave:H,onMouseDown:B,onMouseUp:G,onTouchStart:Q,onTouchMove:X,onTouchEnd:Y,onClick:J,onDoubleClick:K})]})},exports.ResponsiveVoronoi=function(e){return l.jsx(o.ResponsiveWrapper,{children:function(o){var n=o.width,i=o.height;return l.jsx(m,r({width:n,height:i},e))}})},exports.Voronoi=m,exports.computeMesh=v,exports.computeMeshPoints=h,exports.defaultVoronoiProps=u,exports.renderDebugToCanvas=function(e,o){var n=o.delaunay,i=o.voronoi,t=o.detectionRadius,l=o.index;C(e,i),t<1/0&&x(e,n,t),null!==l&&y(e,i,l)},exports.renderDelaunayPointsToCanvas=x,exports.renderVoronoiCellToCanvas=y,exports.renderVoronoiToCanvas=C,exports.useMesh=function(e){var o=e.elementRef,n=e.nodes,i=e.getNodePosition,t=e.width,l=e.height,r=e.margin,u=void 0===r?s:r,a=e.isInteractive,h=void 0===a||a,v=e.detectionRadius,f=void 0===v?1/0:v,M=e.setCurrent,b=e.onMouseEnter,k=e.onMouseMove,m=e.onMouseLeave,C=e.onMouseDown,x=e.onMouseUp,y=e.onClick,D=e.onDoubleClick,T=e.tooltip,w=e.tooltipPosition,L=void 0===w?d:w,P=e.tooltipAnchor,E=void 0===P?c:P,j=e.debug,W=p({points:n,getNodePosition:i,width:t,height:l,margin:u,debug:void 0!==j&&j}),R=W.delaunay,S=W.voronoi,U=g({elementRef:o,nodes:n,margin:u,setCurrent:M,delaunay:R,detectionRadius:f,isInteractive:h,onMouseEnter:b,onMouseMove:k,onMouseLeave:m,onMouseDown:C,onMouseUp:x,onClick:y,onDoubleClick:D,tooltip:T,tooltipPosition:L,tooltipAnchor:E}),A=U.handleMouseEnter,N=U.handleMouseMove,V=U.handleMouseLeave,q=U.handleMouseDown,O=U.handleMouseUp,I=U.handleClick,z=U.handleDoubleClick;return{delaunay:R,voronoi:S,current:U.current,handleMouseEnter:A,handleMouseMove:N,handleMouseLeave:V,handleMouseDown:q,handleMouseUp:O,handleClick:I,handleDoubleClick:z}},exports.useMeshEvents=g,exports.useVoronoi=f,exports.useVoronoiLayerContext=M,exports.useVoronoiMesh=p;
//# sourceMappingURL=nivo-voronoi.cjs.js.map
